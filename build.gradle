
println "hello env"
println System.getenv('DOCS_PRIVATE_KEY')
println "decoded.."
println System.getenv('DOCS_PRIVATE_KEY')?.decodeBase64()

apply plugin: 'java'

repositories {
	mavenCentral()
}

dependencies {
	testCompile 'junit:junit:4.12'
	testCompile 'org.assertj:assertj-core:3.6.1'
}

task integrationTest() << {
	println "integration test start"
	for(int i=0;i<5;i++) {
		Thread.sleep(1000L)
		def d = new Date()
		println "itest $i - $d"
	}
	println "Integration Test Done"
}

task stageDocs() << {
	println "stage docs start"
	for(int i=0;i<5;i++) {
		Thread.sleep(1000L)
		def d = new Date()
		println "stage docs $i - $d"
	}
	println "stage docs Done"
}

task deploy() << {
	println "deploy start"
	for(int i=0;i<5;i++) {
		Thread.sleep(1000L)
		println "deploy $i"
	}
	println "deploy Done"
}

check.dependsOn integrationTest